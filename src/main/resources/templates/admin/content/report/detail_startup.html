<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.thymeleaf.org" layout:decorator="admin/layout/base">
<head>
    <meta charset="UTF-8"/>
    <title>User detail</title>
</head>
<body>
<div layout:fragment="content">
    <link rel="stylesheet" th:href="@{/static/admin/include/css/font-awesome.min.css}"/>
    <link rel="stylesheet" th:href="@{/static/admin/include/css/style.css}"/>
    <link rel="stylesheet" th:href="@{/static/admin/include/css/content.css}"/>

    <div class="member-detail page-container">
        <div class="page-head">
            <div class="container">
                <div class="page-title">
                    신고관리
                </div>
                <!-- .page-title-->
                <div class="page-toolbar">
                    <a href="javascript:history.back();" class="btn btn-default"><i class="fa fa-angle-left"></i> 목록</a>
                </div>
                <!-- .page-toolbar-->
            </div>
        </div>
        <!-- .page-head-->

        <div class="page-content sb-pt-50 sb-pb-50">
            <div class="container">
                <div class="approve-detail-main sb-bg-white sb-p-20">
                    <div class="main-inner sb-pt-0 sb-pb-0">
                        <div class="portlet box green">
                            <div class="portlet-title">
                                <div class="caption">
                                    신고관리
                                </div>
                            </div>
                            <div class="portlet-body form">

                                <div class="block-button-top text-right sb-mb-20">
                                    <a th:href="@{/admin/report/estate/repair/{id}(id=${estate.id})}" class="btn green tab-repair">수정</a>
                                    <a href="javascript:;" th:attr="data-url=@{'/admin/estate/' + ${estate.id}}" class="btn warning littleWide btn-action-estate-delete red">삭제</a>
                                    <a href="" class="btn btn-default">목록</a></div>
                                <!-- .block-button-top-->
                                <div class="slideBox">
                                    <div class="slideArea">
                                        <div class="sideBox">
                                            <div class="arrow leftArrow"></div>
                                        </div>
                                        <div class="centerBox">
                                            <div class="viewImage">
                                                <img th:src="${sizeattach > 0 ? attachments[0].origin : '/admin/assets/images/no_image.jpg'}"/>
                                            </div>
                                            <div class="thumbImage">
                                                <div th:if="${sizeattach > 0}">
                                                    <img  th:each="item : ${attachments}" th:src="${item.origin}"/>
                                                </div>
                                                <span class="thumbNum">1/<span th:text="${sizeattach}"></span></span>
                                            </div>
                                        </div>
                                        <div class="sideBox">
                                            <div class="arrow rightArrow"></div>
                                        </div>
                                    </div>
                                    <div class="infoArea">
                                        <h3>담당자 정보</h3>
                                        <img class="basicImg" th:src="${user.avatar == null ? '/admin/assets/images/no_image.jpg' : user.avatar.thumbnail}"/>

                                        <div class="infoText">
                                            <p th:text="${user.email != null ? user.email : ''}"><strong>담당자:</strong></p>
                                            <p th:text="${user.cellphoneNumber != null ? user.cellphoneNumber : ''}"><strong>연락처:</strong></p>

                                        </div>

                                    </div>
                                </div>



                                <div class="block-estate-table">
                                    <div class="block-header sb-dp-table align-bottom sb-mb-10">
                                        <div class="sb-dp-table-cell sb-f-22" th:text="${estate.name != null ? estate.name : ''}"><strong>흥부 부대찌개 뱅뱅사거리점</strong></div>
                                        <div class="sb-dp-table-cell sb-f-16 text-right" th:text="${estate.availableDate != null ? estate.availableDate : ''}">등록일: <strong>2016.04.01</strong></div>
                                    </div>
                                    <div class="block-body">
                                        <div class="table-wrapper table-responsive">
                                            <table class="table table-bordered align-middle text-center">
                                                <thead>
                                                <tr>
                                                    <th colspan="2" style="width:50%;">기본정보</th>
                                                    <th colspan="2" style="width:50%;">수익비용구조</th>
                                                </tr>
                                                </thead>
                                                <tbody>
                                                <tr>
                                                    <td class="paddingLeft strong" style="width:25%;">매물번호</td>
                                                    <td class="center" style="width:25%;" th:text="${estate.estateCode != null ? estate.estateCode : ''}">201601011121212102</td>
                                                    <td class="paddingLeft strong" style="width:25%;">보증금(만원)</td>
                                                    <td style="width:25%;" class="center" th:text="${estate.depositeCost != null ? estate.depositeCost : ''}">10,000</td>
                                                </tr>
                                                <tr>
                                                    <td class="paddingLeft strong">매물유형</td>
                                                    <td class="center" th:text="${estate.estateType == 'STARTUP' ? '인수창업' : '공실매물' }">창업인수</td>
                                                    <td class="paddingLeft strong">월세(만원)</td>
                                                    <td class="center" th:text="${estate.rentCost != null ? estate.rentCost : ''}">800</td>
                                                </tr>
                                                <tr>
                                                    <td class="paddingLeft strong">카테고리</td>
                                                    <td class="center" th:text="${estate.category.name != null ? estate.category.name : ''}">일반음식점</td>
                                                    <td class="paddingLeft strong">관리비(만원)</td>
                                                    <td class="center" th:text="${estate.serviceCost != null ? estate.serviceCost : ''}">20,000</td>
                                                </tr>
                                                <tr>
                                                    <td class="paddingLeft strong">업종</td>
                                                    <td class="center" th:text="${estate.businessType.name != null ? estate.businessType.name : ''}">한식점</td>
                                                    <td class="paddingLeft strong">권리금(만원)</td>
                                                    <td class="center" th:text="${estate.premiumCost != null ? estate.premiumCost : ''}">2,322</td>
                                                </tr>
                                                <tr>
                                                    <td class="paddingLeft strong">상권</td>
                                                    <td class="center" th:text="${estate.businessZone != null ? estate.businessZone : ''}">서울시 관악구 신림동</td>
                                                    <td class="paddingLeft strong">기타경비(만원)</td>
                                                    <td class="center" th:text="${estate.otherCost != null ? estate.otherCost : ''}">4,000</td>
                                                </tr>
                                                <tr>
                                                    <td class="paddingLeft strong">인근지하철역</td>
                                                    <td class="center" th:text="${estate.subwayStation != null ? estate.subwayStation : ''}">신림역</td>
                                                    <td class="paddingLeft strong">월매출(만원)</td>
                                                    <td class="center" th:text="${estate.monthlyIncome != null ? estate.monthlyIncome : ''}">878</td>
                                                </tr>
                                                <tr>
                                                    <td class="paddingLeft strong">층</td>
                                                    <td class="center" th:text="${estate.floor != null ? estate.floor : ''}">2</td>
                                                    <td class="paddingLeft strong">세전월수입(만원)</td>
                                                    <td class="center" th:text="${estate.monthlyTax != null ? estate.monthlyTax : ''}">22</td>
                                                </tr>
                                                <tr>
                                                    <td class="paddingLeft strong">면적</td>
                                                    <td class="center" th:text="${estate.area != null ? estate.area : ''}">99(30)</td>
                                                    <td class="paddingLeft strong">실수익률(%)</td>
                                                    <td class="center" th:text="${estate.gainRatio != null ? estate.gainRatio : ''}">2355</td>
                                                </tr>
                                                <tr>
                                                    <td class="paddingLeft strong">주차</td>
                                                    <td class="center" th:text="${estate.parking == '0' ? 'N' : 'Y'}">99(30)</td>

                                                </tr>
                                                <tr>
                                                    <th colspan="4">상세설명</th>
                                                </tr>
                                                <tr>
                                                    <td colspan="4" th:text="${estate.detail != null ? estate.detail : ''}" style="color:#666;">
                                                        <div id="map" style="width:330px;height:265px;display:inline-block;margin-right:20px;"></div>
                                                        <div id="roadView" style="width:330px;height:265px;display:inline-block;"></div>
                                                    </td>
                                                </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>


                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </div>
    <!-- .member-detail-->

    <script th:inline="javascript">

        $(document).ready(function(){

//                var loginModal = $(".loginModal");
//                var joinModal = $(".joinModal");
//                var reportModal = $(".reportModal");

//                var mapContainer = document.getElementById('map'), // 지도를 표시할 div
//                        mapOption = {
//                            center: new daum.maps.LatLng(33.450701, 126.570667), // 지도의 중심좌표
//                            level: 3 // 지도의 확대 레벨
//                        };
//
//                var map = new daum.maps.Map(mapContainer, mapOption); // 지도를 생성합니다
//
//                // 마커가 표시될 위치입니다
//                var markerPosition  = new daum.maps.LatLng(33.450701, 126.570667);
//
//                // 마커를 생성합니다
//                var marker = new daum.maps.Marker({
//                    position: markerPosition
//                });
////
////                // 마커가 지도 위에 표시되도록 설정합니다
//                marker.setMap(map);

            //로드뷰
//                var roadviewContainer = document.getElementById('roadView'); //로드뷰를 표시할 div
//                var roadview = new daum.maps.Roadview(roadviewContainer); //로드뷰 객체
//                var roadviewClient = new daum.maps.RoadviewClient(); //좌표로부터 로드뷰 파노ID를 가져올 로드뷰 helper객체
//
//                var position = new daum.maps.LatLng(33.450701, 126.570667);
//
//                // 특정 위치의 좌표와 가까운 로드뷰의 panoId를 추출하여 로드뷰를 띄운다.
//                roadviewClient.getNearestPanoId(position, 50, function(panoId) {
//                    roadview.setPanoId(panoId, position); //panoId와 중심좌표를 통해 로드뷰 실행
//                });

//                $("#deleteMarket").click(function(e){
//                    if(confirm("해당 매물을 삭제하시겠습니까?")){
//                        var id = [[${estate.id}]];
//                        console.log("id: "+id);
//                        window.location.href='/admin/broker/estate/'+id;
//                    }
//                });

            //썸네일을 클릭하면 viewImage에 보여준다.
            $(".thumbImage img").click(function(e){
                var imgs = $(".thumbImage img");
                imgs.removeClass("active");

                $(this).addClass("active");

                $(".viewImage img").attr("src",$(this).attr("src"));

                $(".thumbNum").text($(this).index() + 1 + "/" + imgs.length);
            });

            $(".sideBox").click(function(e){
                var arrow = $(this).find(".arrow");
                var imgs = $(".thumbImage img");
                var currentImg = $(".thumbImage img.active");

                imgs.removeClass("active");

                if(arrow.hasClass("leftArrow")){
                    var prevImg;

                    if(currentImg.index() != 0)
                        prevImg = currentImg.prev();
                    else
                        prevImg = imgs.eq(imgs.length - 1);

                    prevImg.addClass("active");

                    $(".viewImage img").attr("src",prevImg.attr("src"));
                    $(".thumbNum").text(prevImg.index() + 1 + "/" + imgs.length);
                }else{
                    var nextImg;

                    if(currentImg.index() != imgs.length - 1)
                        nextImg = currentImg.next();
                    else
                        nextImg = imgs.eq(0);

                    nextImg.addClass("active");

                    $(".viewImage img").attr("src",nextImg.attr("src"));
                    $(".thumbNum").text(nextImg.index() + 1 + "/" + imgs.length);
                }

            });

//                //잘못된 정보 신고 버튼
//                $(".reportButton").click(function(e){
//                    overlay.addClass("active");
//                    reportModal.addClass("active");
//                    $(window).scrollTop(0);
//                });

            $("#reportConfirmButton").click(function(e){
                var name = $("input[name=reportName]").val();
                var phone = $("input[name=reportPhone]").val();
                var contents = $("input[name=reportContents]").val();

                if(name == "" || phone == "" || contents == ""){
                    alert("모든 정보를 입력해주세요.");
                    return false;
                }

                alert("신고가 접수되었습니다.");
                overlay.removeClass("active");
                reportModal.removeClass("active");
            });

//                //로그인 창 띄우는 버튼
//                $(".loginButton").click(function(e){
//                    overlay.addClass("active");
//                    joinModal.removeClass("active");
//                    $(window).scrollTop(0);
//                    loginModal.addClass("active");
//                });

            //회원가입 창 띄우는 버튼
//                $("#joinButton").click(function(e){
//                    overlay.addClass("active");
//                    joinModal.addClass("active");
//                });

            //로그인 버튼
//                $("#loginConfirmButton").click(function(e){
//                });


            //회원가입 버튼
//                $("#joinConfirmButton").click(function(e){
//                    var email = $("input[name=joinEmail]").val();
//                    var password = $("input[name=joinPassword]").val();
//                    var passConf = $("input[name=joinPassConf]").val();
//                    var policy = $("#c1").prop("checked");
//                    var privacy = $("#c2").prop("checked");
//
//                    if(email == ""){
//                        alert("이메일을 입력해주세요.");
//                        return false;
//                    }
//
//                    if(password == ""){
//                        alert("비빌번호를 입력해주세요.");
//                        return false;
//                    }
//
//                    if(passConf == ""){
//                        alert("비밀번호확인을 입력해주세요.");
//                        return false;
//                    }
//
//                    if(policy == false){
//                        alert("이용약관에 동의해주세요.");
//                        return false;
//                    }
//                    if(privacy == false){
//                        alert("개인정보 취급방침에 동의해주세요.");
//                        return false;
//                    }
//
//                    //TODO : Ajax 통신
//
//                });

            //모달 창 닫기
            $(".modal .exitIcon").click(function(e){
                $(this).parents(".modal").removeClass("active");
                overlay.removeClass("active");
            });
        });
    </script>

</div>
</body>
</html>